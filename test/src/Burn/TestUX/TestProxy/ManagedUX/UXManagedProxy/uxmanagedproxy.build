<?xml version="1.0" encoding="utf-8"?>
<project name="uxmanagedproxy" default="uxmanagedproxy.inc" xmlns="http://nant.sf.net/release/0.85-rc3/nant.xsd">
  <description>
    Copyright (c) Microsoft Corporation.  All rights reserved.
    uxmanagedproxy.build - Builds the uxmanagedproxy.
  </description>

  <!--
  //////////////////////////////////////////////////////////////////////////////////////////////////
  // Properties
  //////////////////////////////////////////////////////////////////////////////////////////////////
  -->

  <!-- Include the global build properties -->
  <include buildfile="..\..\..\..\..\..\..\wix.include" unless="${property::exists('wix.properties.defined')}" />
  
  <property name="managedburnproxy.build.uxmanagedproxydll" value="{dir.target.wix.x86}\ManagedBurnProxy.dll" readonly="true" />
  <property name="managedburnproxy.build.uxmanagedproxypdb" value="{dir.target.wix.x86}\ManagedBurnProxy.pdb" readonly="true" />
  
  <!-- Rebuild -->
  <target name="uxmanagedproxy.build" description="Rebuild uxmanagedproxy">
    <exec program="msbuild.exe" basedir="${framework::get-framework-directory('net-4.0')}" failonerror="true">
      <arg value="/property:Configuration=Debug" if="${debug}" />
      <arg value="/property:Configuration=Release" if="${ship}" />
      <arg value="/target:Rebuild" />
      <arg file="${dir.root}\test\src\Burn\TestUX\TestProxy\ManagedUX\UXManagedProxy\UXManagedProxy.csproj" />
    </exec>
  </target>

  <!-- Clean -->
  <target name="uxmanagedproxy.clean" description="Cleans the uxmanagedproxy build">
    <exec program="msbuild.exe" basedir="${framework::get-framework-directory('net-4.0')}" failonerror="true">
      <arg value="/property:Configuration=Debug" if="${debug}" />
      <arg value="/property:Configuration=Release" if="${ship}" />
      <arg value="/target:Clean" />
      <arg file="${dir.root}\test\src\Burn\TestUX\TestProxy\ManagedUX\UXManagedProxy\UXManagedProxy.csproj" />
    </exec>
    <delete dir="${managedburnproxy.build.uxmanagedproxydll}" failonerror="false" if="${directory::exists(managedburnproxy.build.uxmanagedproxydll)}" />
    <delete dir="${managedburnproxy.build.uxmanagedproxypdb}" failonerror="false" if="${directory::exists(managedburnproxy.build.uxmanagedproxypdb)}" />
  </target>

  <!-- Build -->
  <target name="uxmanagedproxy.inc" description="Incremental uxmanagedproxy build">
    <exec program="msbuild.exe" basedir="${framework::get-framework-directory('net-4.0')}" failonerror="true">
      <arg value="/property:Configuration=Debug" if="${debug}" />
      <arg value="/property:Configuration=Release" if="${ship}" />
      <arg value="/target:Build" />
      <arg file="${dir.root}\test\src\Burn\TestUX\TestProxy\ManagedUX\UXManagedProxy\UXManagedProxy.csproj" />
    </exec>
  </target>
</project>